# 类
### OOP特性
* 抽象
* 封装和数据隐藏
* 多态
* 继承
* 代码的可重用性
---
### Class和Struct的区别
在c++中，Class没有表示访问权限的成员默认为private，而Struct为public，仅此而已。

---
### 内联方法
定义位于类声明中的函数都将自动成为内联函数

---

### 构造函数
> 构造函数是一种特殊的类成员函数，在创建时被掉哦用。
* 每次创建类对象（甚至使用new动态分配内存时），c++都使用类构造函数
* 如果构造函数使用了new，则必须提供使用delete的析构函数

--- 
### 析构函数
用构造函数创建对象后，程序负责跟踪该对象，直到其过期为止。对象过期时，将自动调用析构函数。

---
### const成员函数
```c++
void Stock::show();
...
const Stock land = Stock("Properties");
land.show();
...
```
> 此时编译器将会拒绝第二行，因为show()的代码无法确保调用对象不被修改。为了保证函数不会修改对象，应该将const放在括号后面。
```c++
void Stock::show() const;
```
---
## 类作用域
在类中定义的名称的作用域都为整个类，作用域为整个类的名称只在类中是已知的，在类外是不可知的

---
### 作用域为类的常量
有时候，使符号常量的作用域为类很有用。例如，类声明可能使用字面值30来指定数组的长度，由于该常量对于所有对象来说都是相同的，因此创建一个由所有对象共享的常量是个不错的注意，但是吧
```c++
Class Bakery
{
private:
    const int Months = 12;
    double costs[Months];
    ...
}
```
> 这样做是不行的，因为声明类只是描述了对象的形式，并没有创建对象，也就是说内存中还没有这片空间。

---
> 我们有两种方法来解决
> 1. 使用枚举
> 在类中声明的枚举作用域为整个类
> 但是声明的枚举并不会创建类数据成员，即所有对象中都不包含枚举，只是在遇到Months符号时，将其替换成12（有点类似于宏？）
```c++
class Bakery
{
private:
    enum{Months = 12};
    double costs[Months];
}
```
> 2. 使用static(静态)
> 使用static创建的常量将和其他静态常量存储在一起，而不是在对象中（有关可以看c++内存存储）
```c++
class Bakery
{
private:
    static const int Months = 12;
    double costs[Months];
}
```


---
---
---
## this指针
> 假设这里有一个股票类，从show()的输出我们可以知道持有的哪一支股票价格最高，但由于程序无法直接访问total_val,因此无法做出判断。要让程序知道存储的数据，最直接的就是返回一个值，通常使用内联代码
```c++
class Stock
{
private:
    ...
    double total_val;
    ...
public:
    double total() const{ return total_val; }
    ...
}
```

>为了能将两个要比较的对象提供给成员函数，假设命名一个函数topval()，则Stock1.topval()将访问第一个对象的数据，Stock2.topval()将访问第二个对象打的数据。同时，将要比较的对象通过参数传给方法，出于效率考虑，可以使用引用 const Stock&
```c++
const Stock& :: Stock::topval(const Stock& s) const
{
    if(s.total_val > total_val)
    {
        return s;
    }
    else
    {
        //返回的不是this，因为this是对象的地址而不是对象本身
        //所以使用*this解引用
        return *this;
    }
}
//第一个const表示返回的是一个const Stock引用，因为这是比较两个对象
//所以返回也应该是两对象的其中一个
//第二个const表示传入的参数是const对象，表明不会修改显示访问的对象
//第三个const表示不会修改隐式访问的对象
...
top = stock1.topval(stock2);
```
> * *this指针就是表明指向调用成员函数的对象，this被作为隐藏参数传递给方法。
> *  一般来说所有的类方法都使用this指针设置为调用它的对象的地址,每个成员函数都有一个this指针指向调用对象。
> * 实际上total_val应该是this->total_val

---
---
## 复习题
>---
> 1. 什么是类？
> 答：类是用户定义的类型的定义。类指明了数据将如何存储，同时制定了用来访问和操纵这些数据的方法（类成员函数）。
> ---
> 2. 类如何实现抽象、封装和数据隐藏
> 答：
> 抽象：类表示人们可以通过类方法的共有接口对类对象执行的操作
> 数据隐藏：类的数据成员是私有的，这意味着只能通过成员函数来访问
> 封装：实现的所有具体细节都是隐藏的
> ---
> 3. 对象和类之间的关系是什么？
> 答：类定义了一种类型，包括如何使用它。对象是一个变量或其他数据对象。并根据类定义被创建和是哟个。类和对象的关系犹如标准类型和其变量之间是一样的。
> ---
> 4. 如果创建给定类的多个对象，则各个对象有各自的数据内存空间，但所有的对象都使用同一组成员函数（通常方法是公有的，数据是私有的）